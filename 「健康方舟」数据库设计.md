# 「健康方舟」数据库设计

## 简介

    「健康方舟」是一款基于 HarmonyOS4 并使用鸿蒙平台专用开发语言 ArkTS 开发的一款手机端健康跟踪软件。预期能够实现：常规登录注册、运动饮食监控与分析、制定个性化运动计划、睡眠助眠、睡眠质量分析等功能。

    「健康方舟」项目使用 MySQL 数据库，MySQL 是一款广受欢迎且久经考验的关系型数据库管理系统（RDBMS），以其高性能、高可靠性、易于使用和广泛的跨平台支持而闻名。作为开源软件界的瑰宝，MySQL 在互联网、企业级应用、移动应用、云计算等领域扮演着至关重要的角色，尤其在Web应用程序开发中占据主导地位。

## 数据库 healthy_DB

```sql
CREATE DATABASE healthy_DB;
USE healthy_DB;
```

## 用户信息表 user

- 判断用户表是否已经存在，不存在则创建
- 用户ID：主键、自增长、整数类型、从 1000 开始递增
- 用户名：字符串类型、长度为 20、可为空
- 电话：字符串类型、长度为 11、可为空
- 邮箱：字符串类型、长度为 50、可为空
- 密码：字符串类型、长度为 50、不可为空
- 密码加密盐：字符串类型、长度为 8、不可为空
- 头像：字符串类型、长度为 255、可为空

```sql
CREATE TABLE IF NOT EXISTS user (
    user_id INT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(20) NULL,
    phone VARCHAR(20) NULL,
    email VARCHAR(50) NULL,
    password VARCHAR(50) NOT NULL,
    salt VARCHAR(8) NOT NULL,
    avatar VARCHAR(255) NULL
);
```

## 账户绑定第三方账号表 user_account_binding

- 判断用户账户绑定第三方账号表是否存在，如果不存在则创建
- 绑定ID：主键、自增长、整数类型
- 用户ID：整数类型、外键，引用用户表的主键
- 邮箱：字符串类型、长度为 50、可为空
- 华为账号：字符串类型、长度为 50、可为空
- 创建时间：日期时间类型、不可为空

```sql
CREATE TABLE IF NOT EXISTS user_account_binding (
    user_account_binding_id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT,
    email VARCHAR(50) NULL,
    huawei_account VARCHAR(50) NULL,
    create_time DATETIME NOT NULL,
    FOREIGN KEY (user_id) REFERENCES user(user_id)
);
```

## 用户信息表 user_info

- 用户ID：整数类型、外键，引用用户表的主键
- 身高：浮点数类型、可为空
- 体重：浮点数类型、可为空
- 年龄：整数类型、可为空
- 生日：日期时间类型、可为空
- 性别：布尔类型，取值为 '0' 或 '1'，分别表示'男'、'女'，可为空
- 创建时间：日期时间类型、不可为空

```sql
CREATE TABLE IF NOT EXISTS user_info (
    user_id INT,
    height FLOAT NULL,
    weight FLOAT NULL,
    age INT NULL,
    birthday DATETIME NULL,
    gender BOOLEAN NULL,
    create_time DATETIME NOT NULL,
    update_time DATETIME NOT NULL,
    FOREIGN KEY (user_id) REFERENCES user(user_id)
);
```

## 运动记录表 exercise_record

- 记录ID：主键、自增长、整数类型
- 用户ID：整数类型、外键，引用用户表的主键
- 运动类型：字符串类型，'室外跑步'、'室外健走'、'室外骑行'、'室内跑步'、不可为空
- 运动时间：日期时间类型、不可为空
- 消耗能量：整数类型、不可为空
- 运动距离：浮点数类型、不可为空
- 运动时长：整数类型、不可为空
- 运动轨迹：文本类型、可为空
- 创建时间：日期时间类型，不可为空

```sql
CREATE TABLE IF NOT EXISTS exercise_record (
    exercise_record_id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT,
    exercise_type VARCHAR(20) NOT NULL,
    exercise_time DATETIME NOT NULL,
    calories_burned INT NOT NULL,
    distance FLOAT NOT NULL,
    duration INT NOT NULL,
    exercise_track TEXT NULL,
    create_time DATETIME NOT NULL,
    FOREIGN KEY (user_id) REFERENCES user(user_id)
);
```

## 食物表 food

- 判断食物表是否已经存在，不存在则创建
- 食物ID：主键、自增长、整数类型
- 食物名称：字符串类型、长度为 20、不可为空
- 食物图片：字符串类型、长度为 255、可为空
- 食物热量：整数类型、不可为空
- 食物标签：字符串类型，可为空
- 创建时间：日期时间类型、不可为空

```sql
CREATE TABLE IF NOT EXISTS food (
    food_id INT AUTO_INCREMENT PRIMARY KEY,
    food_name VARCHAR(20) NOT NULL,
    food_image VARCHAR(255) NULL,
    calories INT NOT NULL,
    create_time DATETIME NOT NULL
);
```

## 饮食记录表 diet_record

- 判断饮食记录表是否已经存在，不存在则创建
- 记录ID：主键、自增长、整数类型
- 用户ID：整数类型、外键，引用用户表的主键
- 饮食类型：字符串类型，长度为 20、'早餐'、'午餐'、'晚餐'、'加餐'、不可为空
- 食物ID：整数类型、外键，引用食物表的主键
- 食用时间：日期时间类型、不可为空
- 食用数量：整数类型、不可为空
- 摄入热量：整数类型、不可为空
- 创建时间：日期时间类型、不可为空

```sql
CREATE TABLE IF NOT EXISTS diet_record (
    diet_record_id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT,
    diet_type VARCHAR(20) NOT NULL,
    food_id INT,
    eat_time DATETIME NOT NULL,
    eat_quantity INT NOT NULL,
    calories_intake INT NOT NULL,
    create_time DATETIME NOT NULL,
    FOREIGN KEY (user_id) REFERENCES user(user_id),
    FOREIGN KEY (food_id) REFERENCES food(food_id)
);
```

## 饮食推荐记录表

- 判断推荐饮食搭配表是否已经存在，不存在则创建
- 搭配ID：主键、自增长、整数类型
- 食物ID：整数类型、外键，引用食物表的主键
- 食用数量：整数类型、不可为空
- 摄入热量：整数类型、不可为空
- 饮食类型：字符串类型、长度为 20、不可为空
- 创建时间：日期时间类型、不可为空

```sql
CREATE TABLE IF NOT EXISTS recommended_diet_combination (
    recommended_diet_combination_id INT AUTO_INCREMENT PRIMARY KEY,
    recommended_food_id INT,
    recommended_eat_quantity INT NOT NULL,
    recommended_calories_intake INT NOT NULL,
    diet_type VARCHAR(20) NOT NULL,
    create_time DATETIME NOT NULL,
    FOREIGN KEY (food_id) REFERENCES food(food_id)
);
```

## 睡眠记录表 sleep_record

- 判断睡眠记录表是否已经存在，不存在则创建
- 记录ID：主键、自增长、整数类型
- 用户ID：整数类型、外键，引用用户表的主键
- 上床时间：日期时间类型，不可为空
- 入睡上床时间间隔：整数类型、不可为空
- 醒来时间：日期时间类型，不可为空
- 醒来起床时间间隔：整数类型、不可为空
- 卧床时间：整数类型，不可为空
- 睡眠时间：整数类型，不可为空
- 睡眠质量：字符串类型、长度为20、'优质睡眠'、'良好睡眠'、'一般睡眠'、'差睡眠'、不可为空
- 记录时间：日期时间类型、不可为空（表示这条记录是哪天的）
- 创建时间：日期时间类型、不可为空

```sql
CREATE TABLE IF NOT EXISTS sleep_record (
    sleep_record_id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT,
    bed_time DATETIME NOT NULL,
    sleep_interval INT NOT NULL,
    wake_time DATETIME NOT NULL,
    wake_up_interval INT NOT NULL,
    bed_time_duration INT NOT NULL,
    sleep_duration INT NOT NULL,
    sleep_quality VARCHAR(20) NOT NULL,
    record_time DATETIME NOT NULL,
    create_time DATETIME NOT NULL,
    FOREIGN KEY (user_id) REFERENCES user(user_id)
);
```

## 健康指标记录表 health_indicator_record

- 记录ID：主键、自增长、整数类型
- 用户ID：整数类型、外键，引用用户表的主键
- 测量时间：日期时间类型、不可为空
- 测量类型：字符串类型，长度为20、'血压'、'心率'、'体温'、'血糖'、'血氧'、'体温'、不可为空
- 测量结果：字符串类型、长度为20、根据测量类型不同，对应不同测量结果
- 创建时间：日期时间类型、不可为空

```sql
CREATE TABLE IF NOT EXISTS health_indicator_record (
    health_indicator_record_id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT,
    measure_time DATETIME NOT NULL,
    measure_type VARCHAR(20) NOT NULL,
    measure_result VARCHAR(20) NOT NULL,
    create_time DATETIME NOT NULL,
    FOREIGN KEY (user_id) REFERENCES user(user_id)
);
```

## 减脂计划表 fat_loss_plan

- 判断减脂计划表是否已经存在，不存在则创建
- 计划ID：主键、自增长、整数类型
- 用户ID：整数类型、外键，引用用户表的主键
- 计划名称：字符串类型、长度为20、不可为空
- 计划目标体重：浮点数类型、不可为空
- 计划减重速度：字符串类型、长度为2、'推荐'、'快速'、'激进'、不可为空
- 重点减脂部位：字符串类型、长度为14，不可为空
- 预期结果：字符串类型、长度为100、根据计划目标不同，对应不同预期结果
- 计划周期：整数类型、不可为空
- 计划开始时间：日期时间类型、不可为空
- 计划结束时间：日期时间类型、不可为空
- 创建日期：日期时间类型、不可为空

```sql
CREATE TABLE IF NOT EXISTS fat_loss_plan (
    plan_id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT,
    plan_name VARCHAR(20) NOT NULL,
    target_weight FLOAT NOT NULL,
    reduction_speed VARCHAR(2) NOT NULL,
    focus_area VARCHAR(14) NOT NULL,
    expected_result VARCHAR(100) NOT NULL,
    plan_cycle INT NOT NULL,
    plan_start_time DATETIME NOT NULL,
    plan_end_time DATETIME NOT NULL,
    create_date DATETIME NOT NULL,
    FOREIGN KEY (user_id) REFERENCES user(user_id)
);
```

## 减脂记录表 fat_loss_record

- 判断减脂记录表是否已经存在，不存在则创建
- 记录ID：主键、自增长、整数类型
- 用户ID：整数类型、外键，引用用户表的主键
- 计划ID：整数类型、外键，引用减脂计划表的主键
- 记录时间：日期时间类型、不可为空
- 记录类型：字符串类型、长度为20、'体重'、'饮食'、'运动'、不可为空
- 记录内容：字符串类型、长度为20、根据记录类型不同，对应不同记录内容
- 记录数值：整数类型、根据记录类型不同，对应不同记录数值
- 创建时间：日期时间类型、不可为空

```sql
CREATE TABLE IF NOT EXISTS fat_loss_record (
    fat_loss_record_id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT,
    plan_id INT,
    record_time DATETIME NOT NULL,
    record_type VARCHAR(20) NOT NULL,
    record_content VARCHAR(20) NOT NULL,
    record_value INT NOT NULL,
    create_time DATETIME NOT NULL,
    FOREIGN KEY (user_id) REFERENCES user(user_id),
    FOREIGN KEY (plan_id) REFERENCES fat_loss_plan(plan_id)
)
```

## 运动计划表 exercise_plan

- 判断运动计划表是否已经存在，不存在则创建
- 计划ID：主键、自增长、整数类型
- 用户ID：整数类型、外键，引用用户表的主键
- 减脂计划表ID：整数类型、外键，引用减脂计划表的主键
- 运动类型：字符串类型、长度为20、'室内跑步'、'室内健走'、'室内骑行'、'室外跑步'、'室外健走'、'室外骑行'、不可为空
- 运动时间：日期时间类型、不可为空
- 运动距离：浮点数类型、不可为空
- 运动时长：整数类型、不可为空
- 创建时间：日期时间类型、不可为空

```sql
CREATE TABLE IF NOT EXISTS exercise_plan (
    exercise_plan_id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT,
    fat_loss_plan_id INT,
    exercise_type VARCHAR(20) NOT NULL,
    exercise_time DATETIME NOT NULL,
    distance FLOAT NOT NULL,
    duration INT NOT NULL,
    create_time DATETIME NOT NULL,
    FOREIGN KEY (user_id) REFERENCES user(user_id),
    FOREIGN KEY (fat_loss_plan_id) REFERENCES fat_loss_plan(plan_id)
)
```

## AI方案表 ai_plan

- 判断AI方案表是否已经存在，不存在则创建
- 方案ID：主键、自增长、整数类型
- 用户ID：整数类型、外键，引用用户表的主键
- 计划表ID：整数类型、外键，引用减脂计划表的主键
- 方案名称：字符串类型、长度为20、不可为空
- 推荐摄入热量：整数类型、不可为空
- 饮食记录表 ID：整数类型、外键，引用饮食记录表的主键
- 运动计划表 ID：整数类型、外键，引用运动计划表的主键
- 创建时间：日期时间类型、不可为空

```sql
CREATE TABLE IF NOT EXISTS ai_plan (
    ai_plan_id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT,
    fat_loss_plan_id INT,
    plan_name VARCHAR(20) NOT NULL,
    recommended_calories INT NOT NULL,
    diet_record_id INT,
    exercise_plan_id INT,
    create_time DATETIME NOT NULL,
    FOREIGN KEY (user_id) REFERENCES user(user_id),
    FOREIGN KEY (fat_loss_plan_id) REFERENCES fat_loss_plan(plan_id),
    FOREIGN KEY (diet_record_id) REFERENCES diet_record(diet_record_id),
    FOREIGN KEY (exercise_plan_id) REFERENCES exercise_plan(exercise_plan_id)
)
```

## 音乐表 music

- 判断音乐表是否已经存在，不存在则创建
- 音乐ID：主键、自增长、整数类型
- 音乐名称：字符串类型、长度为20、不可为空
- 音乐文件路径：字符串类型、长度为255、不可为空
- 音乐时长：整数类型、不可为空、单位为 s
- 音乐文件类型：子串串类型、长度为20、不可为空
- 音乐文件大小：浮点数类型、不可为空
- 音乐文件MD5：字符串类型、长度为32、不可为空
- 音乐专辑封面：字符串类型、长度为255、可为空
- 标签：字符串类型、长度为50、不可为空
- 分类：字符串类型、长度为 5、不可为空
- 收听量：整数类型、不可为空、默认为 0
- 创建时间：日期时间类型、不可为空

```sql
CREATE TABLE IF NOT EXISTS music (
    music_id INT AUTO_INCREMENT PRIMARY KEY,
    music_name VARCHAR(20) NOT NULL,
    music_file_path VARCHAR(255) NOT NULL,
    music_duration INT NOT NULL,
    music_file_type VARCHAR(20) NOT NULL,
    music_file_size FLOAT NOT NULL,
    music_file_md5 VARCHAR(32) NOT NULL,
    music_album_cover VARCHAR(255) NULL,
    tags VARCHAR(50) NOT NULL,
    category VARCHAR(5) NOT NULL,
    listen_count INT NOT NULL DEFAULT 0,
    create_time DATETIME NOT NULL
)
```

## 收藏音乐表 favorite_music

- 判断收藏音乐表是否已经存在，不存在则创建
- 收藏ID：主键、自增长、整数类型
- 用户ID：整数类型、外键，引用用户表的主键
- 音乐ID：整数类型、外键，引用音乐表的主键
- 收藏时间：日期时间类型、不可为空
- 创建时间：日期时间类型、不可为空

```sql
CREATE TABLE IF NOT EXISTS favorite_music (
    favorite_music_id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT,
    music_id INT,
    favorite_time DATETIME NOT NULL,
    create_time DATETIME NOT NULL,
    FOREIGN KEY (user_id) REFERENCES user(user_id),
    FOREIGN KEY (music_id) REFERENCES music(music_id)
)
```

# 由 Navicat 导出的 SQL 语句

```sql
/*
 Navicat Premium Data Transfer

 Source Server         : mysql
 Source Server Type    : MySQL
 Source Server Version : 80030
 Source Host           : localhost:3306
 Source Schema         : healthy_db

 Target Server Type    : MySQL
 Target Server Version : 80030
 File Encoding         : 65001

 Date: 23/04/2024 18:17:49
*/

SET NAMES utf8mb4;
SET FOREIGN_KEY_CHECKS = 0;

-- ----------------------------
-- Table structure for diet_record
-- ----------------------------
DROP TABLE IF EXISTS `diet_record`;
CREATE TABLE `diet_record`  (
  `diet_record_id` int NOT NULL AUTO_INCREMENT,
  `user_id` int NULL DEFAULT NULL,
  `diet_type` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL,
  `food_id` int NULL DEFAULT NULL,
  `eat_time` datetime NOT NULL,
  `eat_quantity` int NOT NULL,
  `calories_intake` int NOT NULL,
  `create_time` datetime NOT NULL,
  PRIMARY KEY (`diet_record_id`) USING BTREE,
  INDEX `user_id`(`user_id` ASC) USING BTREE,
  INDEX `food_id`(`food_id` ASC) USING BTREE,
  CONSTRAINT `diet_record_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `user` (`user_id`) ON DELETE RESTRICT ON UPDATE RESTRICT,
  CONSTRAINT `diet_record_ibfk_2` FOREIGN KEY (`food_id`) REFERENCES `food` (`food_id`) ON DELETE RESTRICT ON UPDATE RESTRICT
) ENGINE = InnoDB AUTO_INCREMENT = 1001 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_0900_ai_ci ROW_FORMAT = Dynamic;

-- ----------------------------
-- Table structure for exercise_plan
-- ----------------------------
DROP TABLE IF EXISTS `exercise_plan`;
CREATE TABLE `exercise_plan`  (
  `exercise_plan_id` int NOT NULL AUTO_INCREMENT,
  `user_id` int NULL DEFAULT NULL,
  `fat_loss_plan_id` int NULL DEFAULT NULL,
  `exercise_type` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL,
  `exercise_time` datetime NOT NULL,
  `distance` float NOT NULL,
  `duration` int NOT NULL,
  `create_time` datetime NOT NULL,
  PRIMARY KEY (`exercise_plan_id`) USING BTREE,
  INDEX `user_id`(`user_id` ASC) USING BTREE,
  INDEX `fat_loss_plan_id`(`fat_loss_plan_id` ASC) USING BTREE,
  CONSTRAINT `exercise_plan_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `user` (`user_id`) ON DELETE RESTRICT ON UPDATE RESTRICT,
  CONSTRAINT `exercise_plan_ibfk_2` FOREIGN KEY (`fat_loss_plan_id`) REFERENCES `fat_loss_plan` (`plan_id`) ON DELETE RESTRICT ON UPDATE RESTRICT
) ENGINE = InnoDB AUTO_INCREMENT = 1001 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_0900_ai_ci ROW_FORMAT = Dynamic;

-- ----------------------------
-- Table structure for exercise_record
-- ----------------------------
DROP TABLE IF EXISTS `exercise_record`;
CREATE TABLE `exercise_record`  (
  `exercise_record_id` int NOT NULL AUTO_INCREMENT,
  `user_id` int NULL DEFAULT NULL,
  `exercise_type` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL,
  `exercise_time` datetime NOT NULL,
  `calories_burned` int NOT NULL,
  `distance` float NOT NULL,
  `duration` int NOT NULL,
  `exercise_track` text CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NULL,
  `create_time` datetime NOT NULL,
  PRIMARY KEY (`exercise_record_id`) USING BTREE,
  INDEX `user_id`(`user_id` ASC) USING BTREE,
  CONSTRAINT `exercise_record_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `user` (`user_id`) ON DELETE RESTRICT ON UPDATE RESTRICT
) ENGINE = InnoDB AUTO_INCREMENT = 1001 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_0900_ai_ci ROW_FORMAT = Dynamic;

-- ----------------------------
-- Table structure for fat_loss_plan
-- ----------------------------
DROP TABLE IF EXISTS `fat_loss_plan`;
CREATE TABLE `fat_loss_plan`  (
  `plan_id` int NOT NULL AUTO_INCREMENT,
  `user_id` int NULL DEFAULT NULL,
  `plan_name` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL,
  `target_weight` float NOT NULL,
  `reduction_speed` varchar(2) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL,
  `focus_area` varchar(14) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL,
  `expected_result` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL,
  `plan_cycle` int NOT NULL,
  `plan_start_time` datetime NOT NULL,
  `plan_end_time` datetime NOT NULL,
  `create_date` datetime NOT NULL,
  PRIMARY KEY (`plan_id`) USING BTREE,
  INDEX `user_id`(`user_id` ASC) USING BTREE,
  CONSTRAINT `fat_loss_plan_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `user` (`user_id`) ON DELETE RESTRICT ON UPDATE RESTRICT
) ENGINE = InnoDB AUTO_INCREMENT = 1001 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_0900_ai_ci ROW_FORMAT = Dynamic;

-- ----------------------------
-- Table structure for favorite_music
-- ----------------------------
DROP TABLE IF EXISTS `favorite_music`;
CREATE TABLE `favorite_music`  (
  `favorite_music_id` int NOT NULL AUTO_INCREMENT,
  `user_id` int NULL DEFAULT NULL,
  `music_id` int NULL DEFAULT NULL,
  `favorite_time` datetime NOT NULL,
  `create_time` datetime NOT NULL,
  PRIMARY KEY (`favorite_music_id`) USING BTREE,
  INDEX `user_id`(`user_id` ASC) USING BTREE,
  INDEX `music_id`(`music_id` ASC) USING BTREE,
  CONSTRAINT `favorite_music_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `user` (`user_id`) ON DELETE RESTRICT ON UPDATE RESTRICT,
  CONSTRAINT `favorite_music_ibfk_2` FOREIGN KEY (`music_id`) REFERENCES `music` (`music_id`) ON DELETE RESTRICT ON UPDATE RESTRICT
) ENGINE = InnoDB AUTO_INCREMENT = 1001 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_0900_ai_ci ROW_FORMAT = Dynamic;

-- ----------------------------
-- Table structure for food
-- ----------------------------
DROP TABLE IF EXISTS `food`;
CREATE TABLE `food`  (
  `food_id` int NOT NULL AUTO_INCREMENT,
  `food_name` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL,
  `food_image` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NULL DEFAULT NULL,
  `calories` int NOT NULL,
  `create_time` datetime NOT NULL,
  PRIMARY KEY (`food_id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 1001 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_0900_ai_ci ROW_FORMAT = Dynamic;

-- ----------------------------
-- Table structure for health_indicator_record
-- ----------------------------
DROP TABLE IF EXISTS `health_indicator_record`;
CREATE TABLE `health_indicator_record`  (
  `health_indicator_record_id` int NOT NULL AUTO_INCREMENT,
  `user_id` int NULL DEFAULT NULL,
  `measure_time` datetime NOT NULL,
  `measure_type` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL,
  `measure_result` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL,
  `create_time` datetime NOT NULL,
  PRIMARY KEY (`health_indicator_record_id`) USING BTREE,
  INDEX `user_id`(`user_id` ASC) USING BTREE,
  CONSTRAINT `health_indicator_record_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `user` (`user_id`) ON DELETE RESTRICT ON UPDATE RESTRICT
) ENGINE = InnoDB AUTO_INCREMENT = 1001 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_0900_ai_ci ROW_FORMAT = Dynamic;

-- ----------------------------
-- Table structure for music
-- ----------------------------
DROP TABLE IF EXISTS `music`;
CREATE TABLE `music`  (
  `music_id` int NOT NULL AUTO_INCREMENT,
  `music_name` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL,
  `music_file_path` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL,
  `music_duration` int NOT NULL,
  `music_file_type` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL,
  `music_file_size` float NOT NULL,
  `music_file_md5` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL,
  `music_file_sha1` varchar(40) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL,
  `music_file_sha256` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL,
  `music_album_cover` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NULL DEFAULT NULL,
  `tags` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL,
  `category` varchar(5) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL,
  `listen_count` int NOT NULL DEFAULT 0,
  `create_time` datetime NOT NULL,
  PRIMARY KEY (`music_id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 1001 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_0900_ai_ci ROW_FORMAT = Dynamic;

-- ----------------------------
-- Table structure for sleep_record
-- ----------------------------
DROP TABLE IF EXISTS `sleep_record`;
CREATE TABLE `sleep_record`  (
  `sleep_record_id` int NOT NULL AUTO_INCREMENT,
  `user_id` int NULL DEFAULT NULL,
  `bed_time` datetime NOT NULL,
  `sleep_interval` int NOT NULL,
  `wake_time` datetime NOT NULL,
  `wake_up_interval` int NOT NULL,
  `bed_time_duration` int NOT NULL,
  `sleep_duration` int NOT NULL,
  `sleep_quality` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL,
  `create_time` datetime NOT NULL,
  PRIMARY KEY (`sleep_record_id`) USING BTREE,
  INDEX `user_id`(`user_id` ASC) USING BTREE,
  CONSTRAINT `sleep_record_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `user` (`user_id`) ON DELETE RESTRICT ON UPDATE RESTRICT
) ENGINE = InnoDB AUTO_INCREMENT = 1001 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_0900_ai_ci ROW_FORMAT = Dynamic;

-- ----------------------------
-- Table structure for user
-- ----------------------------
DROP TABLE IF EXISTS `user`;
CREATE TABLE `user`  (
  `user_id` int NOT NULL AUTO_INCREMENT,
  `username` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NULL DEFAULT NULL,
  `phone` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NULL DEFAULT NULL,
  `email` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NULL DEFAULT NULL,
  `password` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL,
  `salt` varchar(8) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL,
  `avatar` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NULL DEFAULT NULL,
  PRIMARY KEY (`user_id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 1001 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_0900_ai_ci ROW_FORMAT = Dynamic;

-- ----------------------------
-- Table structure for user_account_binding
-- ----------------------------
DROP TABLE IF EXISTS `user_account_binding`;
CREATE TABLE `user_account_binding`  (
  `user_account_binding_id` int NOT NULL AUTO_INCREMENT,
  `user_id` int NULL DEFAULT NULL,
  `email` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NULL DEFAULT NULL,
  `huawei_account` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NULL DEFAULT NULL,
  `create_time` datetime NOT NULL,
  PRIMARY KEY (`user_account_binding_id`) USING BTREE,
  INDEX `user_id`(`user_id` ASC) USING BTREE,
  CONSTRAINT `user_account_binding_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `user` (`user_id`) ON DELETE RESTRICT ON UPDATE RESTRICT
) ENGINE = InnoDB AUTO_INCREMENT = 1001 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_0900_ai_ci ROW_FORMAT = Dynamic;

-- ----------------------------
-- Table structure for user_info
-- ----------------------------
DROP TABLE IF EXISTS `user_info`;
CREATE TABLE `user_info`  (
  `user_id` int NULL DEFAULT NULL,
  `height` float NULL DEFAULT NULL,
  `weight` float NULL DEFAULT NULL,
  `age` int NULL DEFAULT NULL,
  `birthday` datetime NULL DEFAULT NULL,
  `gender` tinyint(1) NULL DEFAULT NULL,
  `create_time` datetime NOT NULL,
  `update_time` datetime NOT NULL,
  INDEX `user_id`(`user_id` ASC) USING BTREE,
  CONSTRAINT `user_info_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `user` (`user_id`) ON DELETE RESTRICT ON UPDATE RESTRICT
) ENGINE = InnoDB CHARACTER SET = utf8mb4 COLLATE = utf8mb4_0900_ai_ci ROW_FORMAT = Dynamic;

SET FOREIGN_KEY_CHECKS = 1;

```
