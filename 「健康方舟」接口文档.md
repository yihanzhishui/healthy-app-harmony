# 「健康方舟」接口文档

## 说明

这是毕设项目「健康方舟」的后台接口文档、「健康方舟」是一款基于 HarmonyOS、使用 ArkTS 语言开发的原生鸿蒙应用。

**登录过后：所有的请求都请在请求头带上 `token`**

## 请求基地址

TODO 记得设置

XXXXXX

## 全局响应状态码

| 分类 | 分类描述                                       |
| :--- | :--------------------------------------------- |
| 1XXX | 信息，服务器收到请求，需要请求者继续执行操作   |
| 2XXX | 成功，操作被成功接收并处理                     |
| 3XXX | 重定向，需要进一步的操作以完成请求             |
| 4XXX | 客户端错误，请求包含语法错误或无法完成请求     |
| 5XXX | 服务器错误，服务器在处理请求的过程中发生了错误 |

| 状态码 | 状态码英文名称        | 中文描述                                       |
| :----- | :-------------------- | :--------------------------------------------- |
| 1000   | Continue              | 本次请求成功，但需要进行操作                   |
| 1001   | Other Error           | 请求成功，但出现其他错误                       |
| 2000   | OK                    | 请求成功                                       |
| 2001   | Created               | 已创建。成功请求并创建了新的数据条目           |
| 4000   | Bad Request           | 客户端请求的语法错误，服务器无法理解           |
| 4001   | Unauthorized          | 请求要求用户的身份认证                         |
| 4002   | Unknown Error         | 未知错误                                       |
| 4003   | Forbidden             | 服务器理解请求客户端的请求，但是拒绝执行此请求 |
| 4004   | Not Found             | 服务器无法根据客户端的请求找到资源（网页）     |
| 4005   | Method Not Allowed    | 客户端请求中的方法被禁止                       |
| 5000   | Internal Server Error | 服务器内部错误，无法完成请求                   |
| 5001   | Database Error        | 数据库出错                                     |

## 验证码相关

### 获取短信验证码

#### 简要概述

- 获取短信验证码

#### 请求URL

- `/code/get_sms_verification_code`

#### 请求方式

- get

#### 参数

| 参数名 | 必选 | 类型   | 说明     |
| :----- | :--- | :----- | -------- |
| phone  | 是   | string | 电话号码 |

#### 返回示例

- 成功

```json
{
	"status": "success",
	"code": 2000,
	"message": "验证码发送成功，请注意短信"
}
```

- 失败

```json
{
   "status": "error",
	"code": 5000,
	"message": "验证码发送失败，请稍后重试"
}
```

### 获取邮箱验证码

#### 简要概述

- 获取短信验证码

#### 请求URL

- `/code/get_email_verification_code`

#### 请求方式

- get

#### 参数

| 参数名 | 必选 | 类型   | 说明     |
| :----- | :--- | :----- | -------- |
| email  | 是   | string | 邮箱号码 |

#### 返回示例

- 成功

```json
{
	"status": "success",
	"code": 2000,
	"message": "验证码发送成功，请注意邮箱"
}
```

- 失败

```json
{
   "status": "error",
	"code": 5000,
	"message": "验证码发送失败，请稍后重试"
}
```

## 用户相关

### 短信验证码登录

#### 简要概述

- 用户使用短信验证码登录
- 应该注意：如果用户选择使用短信验证码登录时、应该检查该用户是否已经注册

  - 若已注册，直接登录
  - 若未注册，则应引导其设置密码

#### 请求URL

- `/user/login_by_sms_verification_code`

#### 请求方式

- post

#### 参数

| 参数名   | 必选 | 类型   | 说明       |
| :------- | :--- | :----- | ---------- |
| phone    | 是   | string | 电话号码   |
| sms_code | 是   | string | 短信验证码 |

#### 返回示例

- 登录成功

```json
{
	"status": "success",
	"code": 2000,
	"message": "登陆成功",
    "data": {
        "user_id": 10001,
        "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9... "
    }
}
```

- 登录失败

```json
{
    "status": "error",
	"code": 4002,
	"message": "登录失败，请稍后重试"
}
```

- 第一次登录、需要设置密码

```json
{
    "status": "continue",
	"code": 1000,
	"message": "请设置密码"
}
```

### 邮箱验证码登录

#### 简要概述

- 用户使用邮箱验证码登录
- 应该注意：如果用户选择使用邮箱验证码登录时、应该检查该用户是否已经注册

  - 若已注册，直接登录
  - 若未注册，则应引导其绑定手机号、设置密码

#### 请求URL

- `/user/login_by_email_verification_code`

#### 请求方式

- post

#### 参数

| 参数名     | 必选 | 类型   | 说明       |
| :--------- | :--- | :----- | ---------- |
| email      | 是   | string | 邮箱号     |
| email_code | 是   | string | 邮箱验证码 |

#### 返回示例

- 登录成功

```json
{
	"status": "success",
	"code": 2000,
	"message": "登陆成功",
    "data": {
        "user_id": 10001,
        "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9... "
    }
}
```

- 登录失败

```json
{
    "status": "error",
	"code": 4002,
	"message": "登录失败，请稍后重试"
}
```

- 第一次登录、需要设置密码

```json
{
    "status": "continue",
	"code": 1000,
	"message": "请绑定手机号、设置密码"
}
```

### 使用华为账号登录

#### 简要概述

- 用户使用华为账号认证登录

  - 后端应该调用华为的认证服务，将登陆成功的 `token`信息保存在本地
- 应该注意：检查该用户是否已经注册

  - 若已注册，直接登录
  - 若未注册，则应引导其绑定手机号、设置密码

#### 请求URL

- `/user/login_by_huawei_account`

#### 请求方式

- post

#### 返回示例

- 登录成功

```json
{
	"status": "success",
	"code": 2000,
	"message": "登陆成功",
    "data": {
        "user_id": 10001,
        "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9... "
    }
}
```

- 登录失败

```json
{
    "status": "error",
	"code": 4002,
	"message": "登录失败，请稍后重试"
}
```

- 第一次登录、需要绑定手机号、设置密码

```json
{
    "status": "continue",
	"code": 1000,
	"message": "请绑定手机号、设置密码"
}
```

### 使用账号密码登录

#### 简要概述

- 账号密码登录


#### 请求URL

- `/user/login_by_password`

#### 请求方式

- post

#### 参数

| 参数名   | 必选 | 类型   | 说明 |
| :------- | :--- | :----- | ---- |
| phone    | 是   | string | 电话 |
| email    | 否   | string |      |
| password | 是   | string | 密码 |

- 电话邮箱号不能同时为空

#### 返回示例

- 登录成功

```json
{
	"status": "success",
	"code": 2000,
	"message": "登陆成功",
    "data": {
        "user_id": 10001,
        "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9... "
    }
}
```

- 登录失败

```json
{
    "status": "error",
	"code": 4002,
	"message": "登录失败，请稍后重试"
}
```

### 用户注册

#### 简要概述

- 仅能通过手机号注册

#### 请求URL

- `/user/register`

#### 请求方式

- post

#### 参数

| 参数名           | 必选 | 类型   | 说明       |
| :--------------- | :--- | :----- | ---------- |
| phone            | 是   | string | 电话号码   |
| sms_code         | 是   | string | 短信验证码 |
| password         | 是   | string | 密码       |
| confirm_password | 是   | string | 确认密码   |

- 说明：**email 和 huawei_auth_token 不可同时为空**

#### 返回示例

- 成功，应该直接登录

```json
{
	"status": "success",
	"code": 2000,
	"message": "注册成功",
    "data": {
        "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9... "
    }
}
```

- 失败

```json
{
    "status": "error",
	"code": 4002,
	"message": "注册失败，请稍后重试"
}
```

- 绑定失败

```json
{
    "status": "error",
	"code": 1001,
	"message": "该手机号已注册"
}
```

### 绑定邮箱号

#### 简要概述

- 用户使用其他方式登录过后，绑定邮箱

#### 请求URL

- `/user/binding_email`

#### 请求方式

- put

#### 参数

| 参数名     | 必选 | 类型   | 说明       |
| :--------- | :--- | :----- | ---------- |
| user_id    | 是   | number | 用户id     |
| phone      | 否   | string | 电话号码   |
| email      | 是   | string | 邮箱       |
| email_code | 是   | string | 邮箱验证码 |

#### 返回示例

- 绑定成功

```json
{
	"status": "success",
	"code": 2000,
	"message": "绑定成功"
}
```

- 绑定失败

```json
{
    "status": "error",
	"code": 4002,
	"message": "绑定失败，请稍后重试"
}
```

- 绑定失败

```json
{
    "status": "error",
	"code": 1001,
	"message": "该邮箱已绑定其他账号"
}
```

### 绑定华为账户

#### 简要概述

- 绑定华为账户

#### 请求URL

- `/user/binding_huawei_account`

#### 请求方式

- put

#### 参数

| 参数名            | 必选 | 类型   | 说明              |
| :---------------- | :--- | :----- | ----------------- |
| user_id           | 是   | number | 用户id            |
| phone             | 否   | string | 电话号码          |
| huawei_auth_token | 是   | string | 华为账号验证token |

#### 返回示例

- 绑定成功

```json
{
	"status": "success",
	"code": 2000,
	"message": "绑定成功"
}
```

- 绑定失败

```json
{
    "status": "error",
	"code": 4002,
	"message": "绑定失败，请稍后重试"
}
```

- 绑定失败

```json
{
    "status": "error",
	"code": 1001,
	"message": "该邮箱已绑定其他账号"
}
```

### 更改昵称

#### 简要概述

- 更改昵称

#### 请求URL

- `/user/update_username`

#### 请求方式

- put

#### 参数

| 参数名   | 必选 | 类型   | 说明     |
| :------- | :--- | :----- | -------- |
| user_id  | 是   | number | 用户id   |
| phone    | 否   | string | 电话号码 |
| username | 是   | string | 昵称     |

#### 返回示例

- 成功

```json
{
	"status": "success",
	"code": 2000,
	"message": "修改成功"
}
```

- 失败

```json
{
    "status": "error",
	"code": 4002,
	"message": "修改失败，请稍后重试"
}
```

### 更改头像

#### 简要概述

- 更改头像

#### 请求URL

- `/user/update_avatar`

#### 请求方式

- put

#### 参数

| 参数名  | 必选 | 类型     | 说明        |
| :------ | :--- | :------- | ----------- |
| user_id | 是   | number   | 用户id      |
| phone   | 否   | string   | 电话号码    |
| avatar  | 是   | formData | base64 头像 |

#### 返回示例

- 成功

```json
{
	"status": "success",
	"code": 2000,
	"message": "修改成功"
}
```

- 失败

```json
{
    "status": "error",
	"code": 4002,
	"message": "修改失败，请稍后重试"
}
```

### 修改密码

#### 简要概述

- 更改头像

#### 请求URL

- `/user/update_password`

#### 请求方式

- put

#### 参数

| 参数名           | 必选 | 类型   | 说明       |
| :--------------- | :--- | :----- | ---------- |
| user_id          | 是   | number | 用户id     |
| old_password     | 是   | string | 旧密码     |
| new_password     | 是   | string | 新密码     |
| confirm_password | 是   | string | 确认新密码 |
| phone            | 是   | string | 手机号     |
| sms_code         | 是   | string | 验证码     |

#### 返回示例

- 成功

```json
{
	"status": "success",
	"code": 2000,
	"message": "修改成功"
}
```

- 失败

```json
{
    "status": "error",
	"code": 4002,
	"message": "修改失败，请稍后重试"
}
```

### 注销账户

#### 简要概述

- 注销账户

#### 请求URL

- `/user/delete_user`

#### 请求方式

- delete

#### 参数

| 参数名   | 必选 | 类型   | 说明       |
| :------- | :--- | :----- | ---------- |
| user_id  | 是   | number | 用户id     |
| phone    | 是   | string | 手机号     |
| sms_code | 是   | string | 短信验证码 |

#### 返回示例

- 成功

```json
{
    "status": "success",
    "code": 2000,
    "message": "成功",
}
```

- 失败

```json
{
    "status": "error",
    "code": 4002,
    "message": "失败"
}
```

### 退出登录

#### 简要概述

- 退出登录

#### 请求URL

- `/user/logout`

#### 请求方式

- get

#### 参数

| 参数    | 必选 | 类型   | 说明 |
| :------ | :--- | :----- | :--- |
| user_id | 是   | number |      |

#### 返回示例

- 成功

```json
{
    "status": "success",
    "code": 2000,
    "message": "成功",
}
```

- 失败

```json
{
    "status": "error",
    "code": 4002,
    "message": "失败"
}
```

## 睡眠相关

### 记录睡眠

#### 简要概述

- 记录睡眠状况、新增睡眠数据

#### 请求URL

- `/sleep/add_sleep_record`

#### 请求方式

- put

#### 参数

| 参数名           | 必选 | 类型   | 说明   |
| :--------------- | :--- | :----- | ------ |
| user_id          | 是   | number | 用户id |
| bed_time         | 是   | string |        |
| sleep_interval   | 是   | number |        |
| wake_time        | 是   | string |        |
| wake_up_interval | 是   | number |        |
| record_time      | 是   | string |        |

#### 返回示例

- 成功

```json
{
	"status": "success",
	"code": 2000,
	"message": "记录成功"
}
```

- 失败

```json
{
	"status": "error",
	"code": 4002,
	"message": "记录失败，请稍后重试"
}
```

### 获取最新一条睡眠数据

#### 简要概述

- 获取最新一条睡眠情况的数据

#### 请求URL

- `/sleep/get_lastest_day_sleep_record`

#### 请求方式

- get

#### 参数

| 参数名  | 必选 | 类型   | 说明   |
| :------ | :--- | :----- | ------ |
| user_id | 是   | number | 用户id |

#### 返回示例

- 成功

```json
{
    "status": "success",
    "code": 2000,
    "message": "获取睡眠记录成功",
    "data": [
        {
            "sleep_record_id": 3,
            "user_id": 10,
            "bed_time": "1981-02-01 14:14:58",
            "sleep_interval": 30,
            "wake_time": "2013-04-15 04:12:05",
            "wake_up_interval": {
                "hours": 0,
                "minutes": 30
            },
            "bed_time_duration": {
                "hours": 282253,
                "minutes": 57
            },
            "sleep_duration": {
                "hours": 282252,
                "minutes": 57
            },
            "sleep_quality": "睡眠过度",
            "record_time": "2024-04-28 10:37:13",
            "create_time": "2024-04-28 10:37:13",
            "sleep_time": "2021-01-18 14:57:53",
            "wake_up_time": "2024-04-28 10:37:13"
        }
    ]
}
```

- 失败

```json
{
	"status": "error",
	"code": 4002,
	"message": "记录失败，请稍后重试"
}
```

### 获取本周睡眠数据

#### 简要概述

- 获取最近一周睡眠情况的数据

#### 请求URL

- `/sleep/get_this_week_sleep_record`

#### 请求方式

- get

#### 参数

| 参数名  | 必选 | 类型   | 说明   |
| :------ | :--- | :----- | ------ |
| user_id | 是   | number | 用户id |

#### 返回示例

- 成功（数据可能有错误，但格式如此）

```json
{
    "status": "success",
    "code": 2000,
    "message": "获取睡眠记录成功",
    "data": [
        {
            "sleep_record_id": 3,
            "user_id": 10,
            "bed_time": "1981-02-01 14:14:58",
            "sleep_interval": 30,
            "wake_time": "2013-04-15 04:12:05",
            "wake_up_interval": {
                "hours": 0,
                "minutes": 30
            },
            "bed_time_duration": {
                "hours": 282253,
                "minutes": 57
            },
            "sleep_duration": {
                "hours": 282252,
                "minutes": 57
            },
            "sleep_quality": "睡眠过度",
            "record_time": "2024-04-28 10:37:13",
            "create_time": "2024-04-28 10:37:13",
            "sleep_time": "2021-01-18 14:57:53",
            "wake_up_time": "2024-04-28 10:37:13"
        },
        {
            "sleep_record_id": 2,
            "user_id": 10,
            "bed_time": "2013-09-27 16:23:32",
            "sleep_interval": 30,
            "wake_time": "2017-08-31 23:31:51",
            "wake_up_interval": {
                "hours": 0,
                "minutes": 30
            },
            "bed_time_duration": {
                "hours": 34423,
                "minutes": 8
            },
            "sleep_duration": {
                "hours": 34422,
                "minutes": 8
            },
            "sleep_quality": "睡眠过度",
            "record_time": "2024-04-28 10:37:08",
            "create_time": "2024-04-28 10:37:08",
            "sleep_time": "1980-06-28 17:34:40",
            "wake_up_time": "2024-04-28 10:37:08"
        }
    ]
}
```

- 失败

```json
{
    "status": "error",
    "code": 4002,
    "message": "获取记录失败"
}
```

## 音乐相关

### 获取音乐所有分类列表

#### 简要概述

- 获取音乐所有分类列表

#### 请求URL

- `/music/get_music_category_list`

#### 请求方式

- get

#### 返回示例

- 成功

```json
{
    "status": "success",
    "code": 2000,
    "message": "获取成功",
    "data": {
        "category_list": ['深睡提升','快速入睡','浅睡改善','减压放松','舒缓疗愈','唤醒晨间','日间小憩']
    }
}
```

- 失败

```json
{
    "status": "error",
    "code": 4002,
    "message": "获取失败，请稍后重试"
}
```

### 根据分类获取音乐基本信息

#### 简要概述

- 根据分类获取音乐基本信息列表

#### 请求URL

- `/user/get_music_info_by_category`

#### 请求方式

- get

#### 参数

| 参数名   | 必选 | 类型   | 说明     |
| :------- | :--- | :----- | -------- |
| user_id  | 是   | number | 用户id   |
| category | 是   | string | 音乐分类 |

#### 返回示例

- 成功

```json
{
    "status": "success",
    "code": 2000,
    "message": "获取成功",
    "data": {
       "music_list": [
           {
               "music_id": 2,
               "music_name": "沙沙雨声",
               "listen_count": 120,
               "music_album_cover": "../assets/image/music_album_cover/music_1_pic.png",
               "is_favorite": true
           }，
           {
               "music_id": 3,
               "music_name": "白噪音让你快速入眠",
               "listen_count": 230,
               "music_album_cover": "../assets/image/music_album_cover/music_2_pic.png",
               "is_favorite": false
           }
       ]
    }
}
```

- 失败

```json
{
    "status": "error",
    "code": 4002,
    "message": "获取失败，请稍后重试"
}
```

### 获取具体音乐信息

#### 简要概述

- 获取某一首具体音乐信息

#### 请求URL

- `/user/get_music`

#### 请求方式

- get

#### 参数

| 参数名  | 必选 | 类型   | 说明   |
| :------ | :--- | :----- | ------ |
| user_id | 是   | number | 用户id |

#### 返回示例

- 成功

```json
{
    "status": "success",
    "code": 2000,
    "message": "获取成功",
    "data": {
        "music_id": 2,
        "music_name": "沙沙雨声",
        "tags": ["减压放松","洗涤烦躁","情绪疗愈"],
        "listen_count": 123,
        "is_favorite": true,
        "music_album_cover": "../assets/image/music_album_cover/music_1_pic.png",
        "music_file_path": "../assets/music/music_1.mp3"
    }
}
```

- 失败

```json
{
    "status": "error",
    "code": 4002,
    "message": "获取失败，请稍后重试"
}
```

### 收藏音乐

#### 简要概述

- 收藏音乐

#### 请求URL

- `/user/add_favorite_music`

#### 请求方式

- post

#### 参数

| 参数名        | 必选 | 类型   | 说明     |
| :------------ | :--- | :----- | -------- |
| user_id       | 是   | number | 用户id   |
| music_id      | 是   | number | 音乐id   |
| favorite_time | 是   | string | 收藏时间 |

#### 返回示例

- 成功

```json
{
    "status": "success",
    "code": 2000,
    "message": "收藏成功",
}
```

- 失败

```json
{
    "status": "error",
    "code": 4002,
    "message": "收藏失败，请稍后重试"
}
```

### 获取收藏音乐列表

#### 简要概述

- 获取某个用户收藏音乐列表

#### 请求URL

- `/user/get_favorite_music_list_by_user_id`

#### 请求方式

- get

#### 参数

| 参数名  | 必选 | 类型   | 说明   |
| :------ | :--- | :----- | ------ |
| user_id | 是   | number | 用户id |

#### 返回示例

- 成功

```json
{
    "status": "success",
    "code": 2000,
    "message": "获取成功",
    "data": {
       "music_list": [
           {
               "music_id": 2,
               "music_name": "沙沙雨声",
               "listen_count": 120,
               "music_album_cover": "../assets/image/music_album_cover/music_1_pic.png",
               "is_favorite": true,
               "favorite_time": "2024-04-02 12:23:00"
           }，
           {
               "music_id": 3,
               "music_name": "白噪音让你快速入眠",
               "listen_count": 230,
               "music_album_cover": "../assets/image/music_album_cover/music_2_pic.png",
               "is_favorite": true,
               "favorite_time": "2024-04-02 12:23:00"
           }
       ]
    }
}
```

- 失败

```json
{
    "status": "error",
    "code": 4002,
    "message": "获取失败"
}
```

### 修改音乐信息

#### 简要概述

- 修改音乐信息

#### 请求URL

- `/admin/update_music_info`

#### 请求方式

- put

#### 参数

| 参数名            | 必选 | 类型   | 说明   |
| :---------------- | :--- | :----- | ------ |
| music_id          | 是   | number | 音乐id |
| TODO 记得有空补完 |      |        |        |

#### 返回示例

- 成功

```json
{
    "status": "success",
    "code": 2000,
    "message": "修改成功",
}
```

- 失败

```json
{
    "status": "error",
    "code": 4002,
    "message": "修改失败，请稍后重试"
}
```

### 新增音乐

#### 简要概述

- 新增一条音乐数据

#### 请求URL

- `/admin/add_music`

#### 请求方式

- post

#### 参数

| 参数名            | 必选 | 类型   | 说明     |
| :---------------- | :--- | :----- | -------- |
| music_name        | 是   | string | 音乐名称 |
| TODO 记得有空补完 |      |        |          |

#### 返回示例

- 成功

```json
{
    "status": "success",
    "code": 2000,
    "message": "成功",
}
```

- 失败

```json
{
    "status": "error",
    "code": 4002,
    "message": "失败"
}
```

### 删除音乐

#### 简要概述

- 删除一条音乐数据

#### 请求URL

- `/admin/delete_music`

#### 请求方式

- delete

#### 参数

| 参数名   | 必选 | 类型   | 说明   |
| :------- | :--- | :----- | ------ |
| music_id | 是   | number | 音乐id |

#### 返回示例

- 成功

```json
{
    "status": "success",
    "code": 2000,
    "message": "成功"
}
```

- 失败

```json
{
    "status": "error",
    "code": 4002,
    "message": "失败"
}
```

## 饮食相关

### 获取食物列表

#### 简要概述

- 获取食物列表

#### 请求URL

- `/food/get_food_list`

#### 请求方式

- get

#### 参数

| 参数        | 必选 | 类型   | 说明       |
| :---------- | :--- | :----- | :--------- |
| page_number | 是   | number | 第几页     |
| page_size   | 是   | number | 每页多少条 |

#### 返回示例

- 成功

```json
{
    "status": "success",
    "code": 2000,
    "message": "获取成功",
    "data": {
        "food_id": 12,
        "food_name": "米饭",
        "eat_quantity": 2,
        "calories": 20,
        "food_image": "../assets/image/food_image/rice.png"
    }
}
```

- 失败

```json
{
    "status": "error",
    "code": 4002,
    "message": "失败"
}
```

### 根据标签获取食物列表

#### 简要概述

- 根据标签获取食物列表

#### 请求URL

- `/food/get_food_list_by_tag`

#### 请求方式

- get

#### 参数

| 参数 | 必选 | 类型   | 说明     |
| :--- | :--- | :----- | :------- |
| tag  | 是   | string | 食物标签 |

#### 返回示例

- 成功

```json
{
    "status": "success",
    "code": 2000,
    "message": "获取成功",
    "data": {
        "food_id": 12,
        "food_name": "米饭",
        "eat_quantity": 2,
        "calories": 20,
        "food_image": "../assets/image/food_image/rice.png"
    }
}
```

- 失败

```json
{
    "status": "error",
    "code": 4002,
    "message": "失败"
}
```

### 添加到饮食记录

#### 简要概述

- 添加食物到饮食记录

#### 请求URL

- `/diet/add_to_diet_record`

#### 请求方式

- post

#### 参数

| 参数名    | 必选 | 类型   | 说明                           |
| :-------- | :--- | :----- | ------------------------------ |
| user_id   | 是   | number | 用户id                         |
| diet_type | 是   | string | 饮食类型：早，中，晚，加       |
| food_list | 是   | array  | 本次需要添加的食物列表以及数量 |

#### 返回示例

- 成功

```json
{
    "status": "success",
    "code": 2000,
    "message": "成功",
}
```

- 失败

```json
{
    "status": "error",
    "code": 4002,
    "message": "失败"
}
```

### 根据饮食类型获取食物列表

#### 简要概述

- 根据饮食类型获取用户该餐吃了什么

#### 请求URL

- `/diet/get_diet_record_by_diet_type`

#### 请求方式

- get

#### 参数

| 参数名    | 必选 | 类型   | 说明                     |
| :-------- | :--- | :----- | ------------------------ |
| user_id   | 是   | number | 用户id                   |
| diet_type | 是   | string | 饮食类型：早，中，晚，加 |
| eat_time  | 否   | string | 查询时间，默认当天       |

#### 返回示例

- 成功

```json
{
    "status": "success",
    "code": 2000,
    "message": "获取饮食记录成功",
    "data": {
        "diet_food_record": [
            {
                "diet_record_id": 11,
                "diet_type": "早餐",
                "food_id": 1,
                "food_name": "番茄炒蛋",
                "food_image": null,
                "eat_quantity": 2,
                "calories_intake": 250
            },
            {
                "diet_record_id": 12,
                "diet_type": "早餐",
                "food_id": 1,
                "food_name": "番茄炒蛋",
                "food_image": null,
                "eat_quantity": 2,
                "calories_intake": 250
            },
            {
                "diet_record_id": 13,
                "diet_type": "早餐",
                "food_id": 1,
                "food_name": "番茄炒蛋",
                "food_image": null,
                "eat_quantity": 2,
                "calories_intake": 250
            },
            {
                "diet_record_id": 14,
                "diet_type": "早餐",
                "food_id": 1,
                "food_name": "番茄炒蛋",
                "food_image": null,
                "eat_quantity": 2,
                "calories_intake": 250
            },
            {
                "diet_record_id": 15,
                "diet_type": "早餐",
                "food_id": 1,
                "food_name": "番茄炒蛋",
                "food_image": null,
                "eat_quantity": 2,
                "calories_intake": 250
            }
        ]
    }
}
```

- 失败

```json
{
    "status": "error",
    "code": 4002,
    "message": "失败"
}
```

### 根据日期获取饮食记录

#### 简要概述

- 根据时间获取饮食记录

#### 请求URL

- `/diet/get_diet_record_by_create_time`

#### 请求方式

- get

#### 参数

| 参数名      | 必选 | 类型   | 说明               |
| :---------- | :--- | :----- | ------------------ |
| user_id     | 是   | number | 用户id             |
| create_time | 否   | string | 查询时间，默认当天 |

#### 返回示例

- 成功

```json
{
    "status": "success",
    "code": 2000,
    "message": "成功",
    "data": {
        "diet_food_record": [
            {
                "food_id": 12,
                "food_name": "米饭",
                "food_image": "../assets/image/food_image/rice.png"
                "eat_quantity": 2,
                "diet_type": "早餐",
                "calories_intake": 500
            },
             {
                "food_id": 13,
                "food_name": "面包",
                "food_image": "../assets/image/food_image/bread.png"
                "eat_quantity": 2,
                "diet_type": "午餐",
                "calories_intake": 500
            }
        ]
    }
}
```

- 失败

```json
{
    "status": "error",
    "code": 4002,
    "message": "失败"
}
```

### 获取饮食推荐

#### 简要概述

- 获取饮食推荐

#### 请求URL

- `/diet/get_recommend_diet`

#### 请求方式

- get

#### 参数

| 参数名  | 必选 | 类型   | 说明   |
| :------ | :--- | :----- | ------ |
| user_id | 是   | number | 用户id |

#### 返回示例

- 成功

```json
{
    "status": "success",
    "code": 2000,
    "message": "获取饮食推荐成功",
    "data": {
        "breakfast": [
            {
                "food_id": 1,
                "food_name": "番茄炒蛋",
                "food_image": null,
                "diet_type": "breakfast",
                "eat_quantity": 1,
                "calorises_intake": 150
            }
        ],
        "lunch": [
            {
                "food_id": 2,
                "food_name": "牛肉面",
                "food_image": null,
                "diet_type": "lunch",
                "eat_quantity": 1,
                "calorises_intake": 350
            }
        ],
        "dinner": [
            {
                "food_id": 3,
                "food_name": "清蒸鲈鱼",
                "food_image": null,
                "diet_type": "dinner",
                "eat_quantity": 1,
                "calorises_intake": 290
            }
        ],
        "extra_meal": []
    }
}
```

- 失败

```json
{
    "status": "error",
    "code": 4002,
    "message": "失败"
}
```

### 添加到饮食推荐记录

#### 简要概述

- 添加食物到饮食推荐（AI）记录

#### 请求URL

- `/user/add_to_recommended_diet_record`

#### 请求方式

- post

#### 参数

| 参数名  | 必选 | 类型   | 说明   |
| :------ | :--- | :----- | ------ |
| user_id | 是   | number | 用户id |

#### 返回示例

- 成功

```json
{
    "status": "success",
    "code": 2000,
    "message": "成功",
}
```

- 失败

```json
{
    "status": "error",
    "code": 4002,
    "message": "失败"
}
```

## 减脂、运动相关

### 获取AI减脂方案

#### 简要概述

- 本接口后台使用
- 获取 AI 减脂方案

#### 请求URL

- `/sport/get_ai_plan`

#### 请求方式

- get

#### 参数

| 参数名                | 必选 | 类型   | 说明                         |
| :-------------------- | :--- | :----- | ---------------------------- |
| user_id               | 是   | number | 用户id                       |
| body_shape            | 是   | string | 身体形态                     |
| sport_experience      | 是   | string | 有无运动经验                 |
| reduction_speed       | 是   | string | 减重速度：每周减多少，单位kg |
| target_weight         | 是   | number | 目标体重                     |
| focus_area            | 是   | string | 重点关注部位                 |
| num_per_week_exercise | 是   | string | 每周哪些天可以运动           |

#### 返回示例

- 成功

```json
{
    "status": "pending",
    "code": 200,
    "message": "获取AI减脂方案成功",
    "data": {
            "plan_name": "高效减肥计划",
            "plan_cycle": 30,
            "plan_start_time": "2023-06-20",
            "plan_end_time": "2023-07-20",
            "calories_intake_per_day": 1500,
            "diet": {
                "breakfast": [
                    {
                        "food_id": 64,
                        "food_name": "全麦面包",
                        "food_image": "http://127.0.0.1:3000/food_image/whole_wheat_bread.png",
                        "diet_type": "breakfast",
                        "eat_quantity": 2,
                        "calories_intake": 530
                    },
                    {
                        "food_id": 58,
                        "food_name": "牛奶",
                        "food_image": "http://127.0.0.1:3000/food_image/milk.png",
                        "diet_type": "breakfast",
                        "eat_quantity": 1,
                        "calories_intake": 42
                    }
                ],
                "lunch": [
                    {
                        "food_id": 62,
                        "food_name": "鸡胸肉",
                        "food_image": "http://127.0.0.1:3000/food_image/breasts.png",
                        "diet_type": "lunch",
                        "eat_quantity": 150,
                        "calories_intake": 2475
                    },
                    {
                        "food_id": 57,
                        "food_name": "菠菜",
                        "food_image": "http://127.0.0.1:3000/food_image/spinach.png",
                        "diet_type": "lunch",
                        "eat_quantity": 200,
                        "calories_intake": 460
                    },
                    {
                        "food_id": 53,
                        "food_name": "西红柿",
                        "food_image": "http://127.0.0.1:3000/food_image/tomato.png",
                        "diet_type": "lunch",
                        "eat_quantity": 1,
                        "calories_intake": 18
                    }
                ],
                "dinner": [
                    {
                        "food_id": 60,
                        "food_name": "燕麦片",
                        "food_image": "http://127.0.0.1:3000/food_image/oats.jpg",
                        "diet_type": "dinner",
                        "eat_quantity": 1,
                        "calories_intake": 389
                    },
                    {
                        "food_id": 52,
                        "food_name": "大米",
                        "food_image": "http://127.0.0.1:3000/food_image/rice.png",
                        "diet_type": "dinner",
                        "eat_quantity": 100,
                        "calories_intake": 350
                    }
                ],
                "extra_meal": [
                    {
                        "food_id": 61,
                        "food_name": "香蕉",
                        "food_image": "http://127.0.0.1:3000/food_image/banana.jpg",
                        "diet_type": "extra_meal",
                        "eat_quantity": 1,
                        "calories_intake": 89
                    }
                ]
            },
            "exercise": {
                "outdoor_running": {
                    "exercise_plan": "户外跑步",
                    "exercise_time": "07:00:00",
                    "duration": 120,
                    "distance": 3000
                }
            },
            "sleep": {
                "sleep_time": "22:00:00",
                "wake_time": "06:00:00",
                "duration": 420
            }
        
    }
}
```

- 失败

```json
{
    "status": "error",
    "code": 4002,
    "message": "失败"
}
```

### 采纳AI减脂方案

#### 简要概述

- 采纳最新生成的AI方案

#### 请求URL

- `/sport/adopt_ai_fat_loss_plan`

#### 请求方式

- get

#### 参数

| 参数名  | 必选 | 类型   | 说明   |
| :------ | :--- | :----- | ------ |
| user_id | 是   | number | 用户id |

#### 返回示例

- 成功

```json
{
    "status": "pending",
    "code": 200,
    "message": "采纳AI减脂方案成功"
}
```

- 失败

```json
{
    "status": "error",
    "code": 4002,
    "message": "失败"
}
```



### 获取运动计划

#### 简要概述

- 获取最近一次运动计划

#### 请求URL

- `/sport/get_latest_exercise_plan`

#### 请求方式

- post

#### 参数

| 参数名  | 必选 | 类型   | 说明   |
| :------ | :--- | :----- | ------ |
| user_id | 是   | number | 用户id |

#### 返回示例

- 成功

```json
{
    "status": "success",
    "code": 2000,
    "message": "成功",
    "data": {
        "exercise_plan_id": 12,
        "fat_loss_plan_id": 1,
        "exercise_type": "户外骑行",
        "exercise_time": "2024/3/25 16:00:00-2024/5/20 16:00:00",
        "distance": 5000,
        "duration": 30,
        "create_time": "2024/3/25 16:00:00"
    }
}
```

- 失败

```json
{
    "status": "error",
    "code": 4002,
    "message": "失败"
}
```

### 获取减脂计划表

#### 简要概述

- 获取减脂计划表

#### 请求URL

- `/user/get_fat_loss_plan`

#### 请求方式

- post

#### 参数

| 参数名      | 必选 | 类型   | 说明                   |
| :---------- | :--- | :----- | ---------------------- |
| user_id     | 是   | number | 用户id                 |
| create_date | 否   | string | 创建日期，默认最新一份 |

#### 返回示例

- 成功

```json
{
    "status": "success",
    "code": 2000,
    "message": "成功",
    "data": {
        "plan_id": 1,
        "user_id": 12,
        "plan_name": "阿达阿达是的",
        "target_weight": 45.00,
        "reduction_speed": "推荐",
        "focus_area": "全身",
        "expected_result": "巴拉巴拉巴",
        "plan_cycle": 20,
        "plan_start_time": "2024/5/1 16:00:00-",
        "plan_end_time" "2024/5/20 16:00:00",
        "create_date":  "2024/5/1 16:00:00"
    }
}
```

- 失败

```json
{
    "status": "error",
    "code": 4002,
    "message": "失败"
}
```

## 用户信息相关

### 获取身高、体重、生日、性别

#### 简要概述

- 根据id获取用户身高、体重、生日、性别

#### 请求URL

- `/user/get_user_body_info`

#### 请求方式

- get

#### 参数

| 参数名  | 必选 | 类型   | 说明   |
| :------ | :--- | :----- | ------ |
| user_id | 是   | number | 用户id |

#### 返回示例

- 成功

```json
{
    "status": "success",
    "code": 2000,
    "message": "获取身体信息成功",
    "data": {
        "user_id": "10",
        "height": 165.9,
        "weight": 60.2,
        "birthday": "2001-11-07",
        "age": 22,
        "gender": "男"
    }
}
```

- 失败

```json
{
    "status": "error",
    "code": 4002,
    "message": "失败"
}
```

### 修改身高、体重、生日、性别

#### 简要概述

- 根据id修改用户身高、体重、生日、性别

#### 请求URL

- `/user/update_user_body_info`

#### 请求方式

- put

#### 参数

| 参数名      | 必选 | 类型   | 说明           |
| :---------- | :--- | :----- | -------------- |
| user_id     | 是   | number | 用户id         |
| height      | 否   | number | 身高           |
| weight      | 否   | number | 体重           |
| birthday    | 否   | date   | 生日           |
| gender      | 否   | number | 性别：1男，0女 |
| update_time | 否   | string | 更新时间       |

#### 返回示例

- 成功

```json
{
    "status": "success",
    "code": 2000,
    "message": "修改信息成功",
    "data": {
        "user_id": "10",
        "height": "165.9",
        "weight": "60.2",
        "birthday": "2001-11-07",
        "age": 22,
        "gender": "男"
    }
}
```

- 失败

```json
{
    "status": "error",
    "code": 4002,
    "message": "失败"
}
```

